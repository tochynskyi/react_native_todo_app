{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { LinearGradient } from \"expo-linear-gradient\";\nimport React, { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport { registration, login } from \"../http/userAPI\";\nimport { useAppDispatch, useAppSelector } from \"../store/hooks\";\nimport { fetchUserError, userLogin, userLoginSuccess } from \"../store/userSlice\";\nimport { Colors } from \"../styles/colors\";\nimport { globalStyles } from \"../styles/global\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Auth = function Auth() {\n  var _useAppSelector = useAppSelector(function (state) {\n    return state.user;\n  }),\n      userError = _useAppSelector.userError;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      username = _useState2[0],\n      setUsername = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLogin = _useState6[0],\n      setIsLogin = _useState6[1];\n\n  var dispatch = useAppDispatch();\n\n  var onSubmit = function onSubmit() {\n    var user;\n    return _regeneratorRuntime.async(function onSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n\n            if (!isLogin) {\n              _context.next = 8;\n              break;\n            }\n\n            dispatch(userLogin());\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(login(username, password));\n\n          case 5:\n            user = _context.sent;\n            dispatch(userLoginSuccess(user));\n            return _context.abrupt(\"return\");\n\n          case 8:\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(registration(username, password));\n\n          case 10:\n            _context.next = 16;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0.response.data.message);\n            dispatch(fetchUserError(_context.t0.response.data.message));\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 12]], Promise);\n  };\n\n  return _jsxs(LinearGradient, {\n    colors: [Colors.primaryBg, Colors.white],\n    style: styles.container,\n    children: [!!userError && _jsx(Text, {\n      children: userError\n    }), _jsx(Text, {\n      style: styles.title,\n      children: isLogin ? \"Sing in\" : \"Sign up\"\n    }), _jsx(TextInput, {\n      style: styles.input,\n      onChangeText: function onChangeText(username) {\n        return setUsername(username);\n      },\n      placeholder: \"Username\"\n    }), _jsx(TextInput, {\n      secureTextEntry: true,\n      style: styles.input,\n      onChangeText: function onChangeText(password) {\n        return setPassword(password);\n      },\n      placeholder: \"Password\"\n    }), _jsx(Pressable, {\n      style: styles.submitBtn,\n      onPress: onSubmit,\n      children: _jsx(Text, {\n        style: styles.submitBtnTitle,\n        children: isLogin ? \"Entry\" : \"Create account\"\n      })\n    }), _jsxs(View, {\n      style: styles.choiceWrapper,\n      children: [_jsx(Text, {\n        style: [styles.choiceTitle, globalStyles.blackTxt],\n        children: isLogin ? \"Don`t have an account?\" : \"Already have an account?\"\n      }), _jsx(Pressable, {\n        style: styles.choiceBtn,\n        onPress: function onPress() {\n          return setIsLogin(!isLogin);\n        },\n        children: _jsx(Text, {\n          style: [styles.choiceBtnTitle, globalStyles.blackTxt],\n          children: isLogin ? \"Sign up\" : \"Sign in\"\n        })\n      })]\n    })]\n  });\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: \"100%\"\n  },\n  title: {\n    fontSize: 46,\n    fontWeight: \"700\",\n    marginBottom: 20,\n    color: Colors.white\n  },\n  input: {\n    padding: 10,\n    backgroundColor: \"#e4e3e3\",\n    borderRadius: 20,\n    width: \"80%\",\n    height: 50,\n    marginBottom: 15\n  },\n  submitBtn: {\n    display: \"flex\",\n    alignItems: \"center\",\n    borderWidth: 1,\n    padding: 5,\n    backgroundColor: Colors.primaryBg,\n    borderColor: Colors.primaryBg,\n    borderRadius: 20,\n    width: \"80%\",\n    height: 50,\n    overflow: \"hidden\"\n  },\n  submitBtnTitle: {\n    fontSize: 26,\n    fontWeight: \"700\"\n  },\n  choiceWrapper: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    width: \"65%\",\n    marginTop: 20\n  },\n  choiceTitle: {\n    fontSize: 16,\n    fontWeight: \"300\",\n    marginRight: 10\n  },\n  choiceBtn: {\n    height: 23\n  },\n  choiceBtnTitle: {\n    fontSize: 16,\n    fontWeight: \"600\"\n  }\n});\nexport default Auth;","map":{"version":3,"sources":["C:/Users/Сергій/Desktop/Проекти/React Native/Todo-app/client/pages/Auth.tsx"],"names":["LinearGradient","React","useState","registration","login","useAppDispatch","useAppSelector","fetchUserError","userLogin","userLoginSuccess","Colors","globalStyles","Auth","state","user","userError","username","setUsername","password","setPassword","isLogin","setIsLogin","dispatch","onSubmit","console","log","response","data","message","primaryBg","white","styles","container","title","input","submitBtn","submitBtnTitle","choiceWrapper","choiceTitle","blackTxt","choiceBtn","choiceBtnTitle","StyleSheet","create","flex","alignItems","justifyContent","width","fontSize","fontWeight","marginBottom","color","padding","backgroundColor","borderRadius","height","display","borderWidth","borderColor","overflow","flexDirection","marginTop","marginRight"],"mappings":"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","sourcesContent":["import { LinearGradient } from \"expo-linear-gradient\";\r\nimport React, { useState } from \"react\";\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  Text,\r\n  TextInput,\r\n  Pressable,\r\n  Alert,\r\n} from \"react-native\";\r\nimport { registration, login } from \"../http/userAPI\";\r\nimport { useAppDispatch, useAppSelector } from \"../store/hooks\";\r\nimport {\r\n  fetchUserError,\r\n  userLogin,\r\n  userLoginSuccess,\r\n} from \"../store/userSlice\";\r\nimport { Colors } from \"../styles/colors\";\r\nimport { globalStyles } from \"../styles/global\";\r\n\r\nconst Auth = () => {\r\n  const { userError } = useAppSelector((state) => state.user);\r\n  const [username, setUsername] = useState<string>(\"\");\r\n  const [password, setPassword] = useState<string>(\"\");\r\n  const [isLogin, setIsLogin] = useState<boolean>(true);\r\n  const dispatch = useAppDispatch();\r\n\r\n  const onSubmit = async () => {\r\n    try {\r\n      \r\n      if (isLogin) {\r\n        dispatch(userLogin());\r\n       const user = await login(username, password);\r\n        dispatch(userLoginSuccess(user));\r\n\t\t  return\r\n      }\r\n      await registration(username, password);\r\n    } catch (e: any) {\r\n      console.log(e.response.data.message);\r\n      dispatch(fetchUserError(e.response.data.message));\r\n    }\r\n  };\r\n\r\n  return (\r\n\t<LinearGradient colors={[Colors.primaryBg, Colors.white]}\r\n\tstyle={styles.container}>\r\n      {!!userError && <Text>{userError}</Text>}\r\n      <Text style={styles.title}>{isLogin ? \"Sing in\" : \"Sign up\"}</Text>\r\n      <TextInput\r\n        style={styles.input}\r\n        onChangeText={(username) => setUsername(username)}\r\n        placeholder=\"Username\"\r\n      />\r\n      <TextInput\r\n        secureTextEntry\r\n        style={styles.input}\r\n        onChangeText={(password) => setPassword(password)}\r\n        placeholder=\"Password\"\r\n      />\r\n      <Pressable style={styles.submitBtn} onPress={onSubmit}>\r\n        <Text style={styles.submitBtnTitle}>\r\n          {isLogin ? \"Entry\" : \"Create account\"}\r\n        </Text>\r\n      </Pressable>\r\n      <View style={styles.choiceWrapper}>\r\n        <Text style={[styles.choiceTitle, globalStyles.blackTxt]}>\r\n          {isLogin ? \"Don`t have an account?\" : \"Already have an account?\"}\r\n        </Text>\r\n        <Pressable\r\n          style={styles.choiceBtn}\r\n          onPress={() => setIsLogin(!isLogin)}\r\n        >\r\n          <Text style={[styles.choiceBtnTitle, globalStyles.blackTxt]}>\r\n            {isLogin ? \"Sign up\" : \"Sign in\"}\r\n          </Text>\r\n        </Pressable>\r\n      </View>\r\n\t\t</LinearGradient>\r\n\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    width: \"100%\",\r\n  },\r\n  title: {\r\n    fontSize: 46,\r\n    fontWeight: \"700\",\r\n    marginBottom: 20,\r\n\t color: Colors.white\r\n  },\r\n  input: {\r\n    padding: 10,\r\n    backgroundColor: \"#e4e3e3\",\r\n    borderRadius: 20,\r\n    width: \"80%\",\r\n    height: 50,\r\n    marginBottom: 15,\r\n  },\r\n  submitBtn: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    borderWidth: 1,\r\n    padding: 5,\r\n\t backgroundColor: Colors.primaryBg,\r\n    borderColor: Colors.primaryBg,\r\n    borderRadius: 20,\r\n    width: \"80%\",\r\n    height: 50,\r\n    overflow: \"hidden\",\r\n  },\r\n  submitBtnTitle: {\r\n    fontSize: 26,\r\n    fontWeight: \"700\",\r\n  },\r\n  choiceWrapper: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"flex-end\",\r\n    width: \"65%\",\r\n    marginTop: 20,\r\n  },\r\n  choiceTitle: {\r\n    fontSize: 16,\r\n    fontWeight: \"300\",\r\n    marginRight: 10,\r\n  },\r\n  choiceBtn: {\r\n    height: 23,\r\n  },\r\n  choiceBtnTitle: {\r\n    fontSize: 16,\r\n    fontWeight: \"600\",\r\n  },\r\n});\r\n\r\nexport default Auth;\r\n"]},"metadata":{},"sourceType":"module"}